#!/usr/bin/python3


import sys
import re

X = "Source:\n  - Title: A Year with Hafiz\n    Page: ([^\n])*\n    Translator: Daniel Ladinsky\n"
Y = "Source:\n  ID: 8147df67-439b-4909-bfe3-d55b944af666\n  Location:\n    Page: \g<1>\n"

for f in sys.argv[1:]:

  fin = open(f, 'r')
  d = fin.read()
  fin.close()

  n = re.sub(X, Y, d, flags=re.DOTALL | re.MULTILINE)

  fout = open(f, 'w')
  fout.write(n)
  fout.close()

