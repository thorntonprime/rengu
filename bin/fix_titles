#!/usr/bin/python3


import sys
import re

#X = "Source:\n  - Title: A Year with Rilke\n.*Joanna Macy\n"
X = "Source:\n  ID: 631057a1-0221-4885-ba61-78b661b62b70\n\s+Page: ([^\n]*)\n  - Title:"
Y = "Source:\n  ID: 631057a1-0221-4885-ba61-78b661b62b70\n  Location:\n    Page: \g<1>\n  Source:\n    Title:"

for f in sys.argv[1:]:

  fin = open(f, 'r')
  d = fin.read()
  fin.close()

  n = re.sub(X, Y, d, flags=re.DOTALL | re.MULTILINE)

  fout = open(f, 'w')
  fout.write(n)
  fout.close()

