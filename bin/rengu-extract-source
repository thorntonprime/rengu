#!/usr/bin/python3

import sys

sys.path.append('')

from rengu.tools import walk_search

def verse_extract_source(vpk):
    from rengu.verse import Verse

    v = Verse.fetch(vpk)

    for role in [ "Source" ]:
        for a in walk_search(role, dict(v)):

            if isinstance(a, str):
                print(a)
            elif isinstance(a, dict):
                print(a.get("Title", "NO TITLE"))
            else:
                print("ERROR a is a ", type(a))
                print(a)
                sys.exit(1)
            sys.stdout.flush()



if __name__ == '__main__':

    for vpk in sys.argv[1:]:
        verse_extract_source(vpk)
	
