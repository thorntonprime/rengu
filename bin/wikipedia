#!/usr/bin/python3

import sys
import unicodedata
import wptools

def normalize(input_str):
  ## Returns a NFKD normalized form of the input string
  nfkd_form = unicodedata.normalize('NFKD', input_str)
  return u"".join([c for c in nfkd_form if not unicodedata.combining(c)])

def wiki_page(title):

  page = wptools.page(normalize(title), silent=True, skip=['imageinfo'])
  try:
    page.get(timeout=5)
  except LookupError:
    return "{error lookup}"
  except RecursionError:
    return "{recursion error recursion}"
  except:
    return "{error timeout}"

  what = str(page.data.get('what', 'none')).strip()
  if what == 'Wikimedia disambiguation page':
    what = "disambiguate"

  if not 'label' in page.data:
    return '{error no label}'

  return page.data['label'] + " {" + what + "}"

if __name__ == '__main__':

  for title in [x.strip() for x in sys.stdin.readlines() ]:
     print(title, "=>", wiki_page(title))

