#!/bin/env python3

import re
from pathlib import Path

data = Path('processing/cloud.txt').read_text()

pattern = re.compile("""
    Chapter \s+ (?P<chapter>\d+): \s+ (?P<short_title>.+?) $
    \s+
    HERE \s BEGINNETH \s THE [^\n]+ $
    (?P<title>.+?) \. $
    """,
    re.VERBOSE | re.DOTALL | re.MULTILINE )

for m in pattern.finditer(data):

    chapter = m.group('chapter')
    short_title = m.group('short_title')
    title = m.group('title')
    
    if chapter == '18':
      print("---")
      print(m.group('chapter'), m.group('short_title'))
      print()
      print(m.group('title'))
      # print(m.group('body'))
      print()

